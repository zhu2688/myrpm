<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>File: FAQ [unicorn-4.8.3 Documentation]</title>

  <link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet" />

  <script src="./js/jquery.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="./js/thickbox-compressed.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="./js/quicksearch.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="./js/darkfish.js" type="text/javascript"
    charset="utf-8"></script>
</head>

<body class="file">
  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="./index.html">Home</a>
          <a href="./index.html#classes">Classes</a>
          <a href="./index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="./Application_Timeouts.html">Application_Timeouts</a></li>
        
          <li class="file"><a href="./CONTRIBUTORS.html">CONTRIBUTORS</a></li>
        
          <li class="file"><a href="./ChangeLog.html">ChangeLog</a></li>
        
          <li class="file"><a href="./DESIGN.html">DESIGN</a></li>
        
          <li class="file"><a href="./FAQ.html">FAQ</a></li>
        
          <li class="file"><a href="./HACKING.html">HACKING</a></li>
        
          <li class="file"><a href="./ISSUES.html">ISSUES</a></li>
        
          <li class="file"><a href="./KNOWN_ISSUES.html">KNOWN_ISSUES</a></li>
        
          <li class="file"><a href="./LATEST.html">LATEST</a></li>
        
          <li class="file"><a href="./LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./Links.html">Links</a></li>
        
          <li class="file"><a href="./NEWS.html">NEWS</a></li>
        
          <li class="file"><a href="./PHILOSOPHY.html">PHILOSOPHY</a></li>
        
          <li class="file"><a href="./README.html">README</a></li>
        
          <li class="file"><a href="./SIGNALS.html">SIGNALS</a></li>
        
          <li class="file"><a href="./Sandbox.html">Sandbox</a></li>
        
          <li class="file"><a href="./TODO.html">TODO</a></li>
        
          <li class="file"><a href="./TUNING.html">TUNING</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class Index
          <span class="search-toggle"><img src="./images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="./Unicorn.html">Unicorn</a></li>
        
          <li><a href="./Unicorn/App.html">Unicorn::App</a></li>
        
          <li><a href="./Unicorn/App/OldRails.html">Unicorn::App::OldRails</a></li>
        
          <li><a href="./Unicorn/App/OldRails/Static.html">Unicorn::App::OldRails::Static</a></li>
        
          <li><a href="./Unicorn/CGIWrapper.html">Unicorn::CGIWrapper</a></li>
        
          <li><a href="./Unicorn/ClientShutdown.html">Unicorn::ClientShutdown</a></li>
        
          <li><a href="./Unicorn/Configurator.html">Unicorn::Configurator</a></li>
        
          <li><a href="./Unicorn/HttpParser.html">Unicorn::HttpParser</a></li>
        
          <li><a href="./Unicorn/HttpServer.html">Unicorn::HttpServer</a></li>
        
          <li><a href="./Unicorn/OobGC.html">Unicorn::OobGC</a></li>
        
          <li><a href="./Unicorn/PrereadInput.html">Unicorn::PrereadInput</a></li>
        
          <li><a href="./Unicorn/SSLClient.html">Unicorn::SSLClient</a></li>
        
          <li><a href="./Unicorn/SSLConfigurator.html">Unicorn::SSLConfigurator</a></li>
        
          <li><a href="./Unicorn/StreamInput.html">Unicorn::StreamInput</a></li>
        
          <li><a href="./Unicorn/TeeInput.html">Unicorn::TeeInput</a></li>
        
          <li><a href="./Unicorn/TmpIO.html">Unicorn::TmpIO</a></li>
        
          <li><a href="./Unicorn/Util.html">Unicorn::Util</a></li>
        
          <li><a href="./Unicorn/Worker.html">Unicorn::Worker</a></li>
        
          <li><a href="./ExecCgi/ExecCgi.html">ExecCgi::ExecCgi</a></li>
        
          <li><a href="./Inetd/Inetd.html">Inetd::Inetd</a></li>
        
          <li><a href="./Object.html">Object</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    
<h1>Frequently Asked Questions about <a href="Unicorn.html">Unicorn</a></h1>

<h3>I’ve installed Rack 1.1.x, why can’t <a href="Unicorn.html">Unicorn</a> load Rails (2.3.5)?</h3>

<p>Rails 2.3.5 is not compatible with Rack 1.1.x.  <a
href="Unicorn.html">Unicorn</a> is compatible with both Rack 1.1.x and Rack
1.0.x, and RubyGems will load the latest version of Rack installed on the
system.  Uninstalling the Rack 1.1.x gem should solve gem loading issues
with Rails 2.3.5.  Rails 2.3.6 and later correctly support Rack 1.1.x.</p>

<h3>Why are my redirects going to “http” URLs when my site uses https?</h3>

<p>If your site is entirely behind https, then Rack applications that use
“rack.url_scheme” can set the following in the <a
href="Unicorn.html">Unicorn</a> config file:</p>

<pre>HttpRequest::DEFAULTS[&quot;rack.url_scheme&quot;] = &quot;https&quot;</pre>

<p>For frameworks that do not use “rack.url_scheme”, you can also try setting
one or both of the following:</p>

<pre>HttpRequest::DEFAULTS[&quot;HTTPS&quot;] = &quot;on&quot;
HttpRequest::DEFAULTS[&quot;HTTP_X_FORWARDED_PROTO&quot;] = &quot;https&quot;</pre>

<p>Otherwise, you can configure your proxy (nginx) to send the
“X-Forwarded-Proto: https” header only for parts of the site that use
https.  For nginx, you can do it with the following line in appropriate
“location” blocks of your nginx config file:</p>

<pre>proxy_set_header X-Forwarded-Proto https;</pre>

<h3>Why are log messages from <a href="Unicorn.html">Unicorn</a> are unformatted when using Rails?</h3>

<p>Current versions of Rails unfortunately overrides the default Logger
formatter.</p>

<p>You can undo this behavior with the default logger in your <a
href="Unicorn.html">Unicorn</a> config file:</p>

<pre>Configurator::DEFAULTS[:logger].formatter = Logger::Formatter.new</pre>

<p>Of course you can specify an entirely different logger as well with the
“logger” directive described by <a
href="Unicorn/Configurator.html">Unicorn::Configurator</a>.</p>

<h3>Why am I getting “connection refused”/502 errors under high load?</h3>

<p>Short answer: your application cannot keep up.</p>

<p>You can increase the size of the :backlog parameter if your kernel supports
a larger listen() queue, but keep in mind having a large listen queue makes
failover to a different machine more difficult.</p>

<p>See the <a href="TUNING.html">TUNING</a> and <a
href="Unicorn/Configurator.html">Unicorn::Configurator</a> documents for
more information on :backlog-related topics.</p>

  </div>

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>
</body>
</html>

